(function(e){function t(t){for(var r,n,i=t[0],c=t[1],u=t[2],d=0,b=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&b.push(o[n][0]),o[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(b.length)b.shift()();return a.push.apply(a,u||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],r=!0,i=1;i<s.length;i++){var c=s[i];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=n(n.s=s[0]))}return e}var r={},o={app:0},a=[];function n(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=r,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"54d6":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);var r=s("7a23");function o(e,t,s,o,a,n){const i=Object(r["A"])("the-header"),c=Object(r["A"])("router-view");return Object(r["t"])(),Object(r["f"])(r["a"],null,[Object(r["j"])(i),Object(r["g"])("main",null,[Object(r["j"])(c)])],64)}const a=e=>(Object(r["w"])("data-v-47c6584c"),e=e(),Object(r["u"])(),e),n=a(()=>Object(r["g"])("h1",null,"Product Surveys",-1));function i(e,t,s,o,a,i){const c=Object(r["A"])("the-links");return Object(r["t"])(),Object(r["f"])("div",null,[n,Object(r["j"])(c)])}const c={key:0},u=Object(r["i"])("Login"),l={key:1},d=Object(r["i"])("Sign Up"),b={key:2},m=Object(r["i"])("New"),p={key:3},j=Object(r["i"])("Surveys"),O=Object(r["i"])("Logout");function v(e,t,s,o,a,n){const i=Object(r["A"])("router-link");return Object(r["t"])(),Object(r["f"])("ul",null,[n.isAuthenticated?Object(r["e"])("",!0):(Object(r["t"])(),Object(r["f"])("li",c,[Object(r["j"])(i,{to:"/login"},{default:Object(r["I"])(()=>[u]),_:1})])),n.isAuthenticated?Object(r["e"])("",!0):(Object(r["t"])(),Object(r["f"])("li",l,[Object(r["j"])(i,{to:"/signup"},{default:Object(r["I"])(()=>[d]),_:1})])),n.isAuthenticated?(Object(r["t"])(),Object(r["f"])("li",b,[Object(r["j"])(i,{to:"/new"},{default:Object(r["I"])(()=>[m]),_:1})])):Object(r["e"])("",!0),n.isAuthenticated?(Object(r["t"])(),Object(r["f"])("li",p,[Object(r["j"])(i,{to:"/surveys"},{default:Object(r["I"])(()=>[j]),_:1})])):Object(r["e"])("",!0),n.isAuthenticated?(Object(r["t"])(),Object(r["f"])("li",{key:4,onClick:t[0]||(t[0]=(...e)=>n.logout&&n.logout(...e))},[Object(r["j"])(i,{to:"/login"},{default:Object(r["I"])(()=>[O]),_:1})])):Object(r["e"])("",!0)])}var h={computed:{isAuthenticated(){return this.$store.getters.isAuthenticated}},methods:{logout(){this.$store.dispatch("logout"),this.$store.dispatch("surveys/clearSurveys"),this.$router.replace("/login")}}},g=(s("67a2"),s("6b0d")),f=s.n(g);const y=f()(h,[["render",v],["__scopeId","data-v-ef918ee6"]]);var S=y,w={components:{TheLinks:S}};s("6a70");const I=f()(w,[["render",i],["__scopeId","data-v-47c6584c"]]);var P=I,k={components:{TheHeader:P},created(){this.$store.dispatch("autoLogin")}};s("daad");const _=f()(k,[["render",o]]);var A=_,N=s("6c02");const U=e=>(Object(r["w"])("data-v-2eed9914"),e=e(),Object(r["u"])(),e),C=U(()=>Object(r["g"])("h2",null,"Login",-1)),M={class:"form-element"},E={class:"form-element"},J=U(()=>Object(r["g"])("button",null,"Login",-1));function $(e,t,s,o,a,n){return Object(r["t"])(),Object(r["f"])("form",{class:"login-form",onSubmit:t[2]||(t[2]=Object(r["K"])((...e)=>n.login&&n.login(...e),["prevent"]))},[C,Object(r["g"])("div",M,[Object(r["J"])(Object(r["g"])("input",{type:"text",class:"form-input",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e)},null,512),[[r["G"],a.email]])]),Object(r["g"])("div",E,[Object(r["J"])(Object(r["g"])("input",{type:"password",class:"form-input",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e)},null,512),[[r["G"],a.password]])]),Object(r["g"])("p",{class:Object(r["p"])({active:!0===a.isError})},Object(r["C"])(a.errorMessage),3),J],32)}var V={data(){return{email:"",password:"",isError:!1,errorMessage:null}},methods:{async login(){this.isError=!1,this.errorMessage=null;const e={mode:"login",email:this.email,password:this.password};this.errorMessage=await this.$store.dispatch("auth",e),null!==this.errorMessage?this.isError=!0:this.$router.replace("/surveys")}}};s("6a43");const q=f()(V,[["render",$],["__scopeId","data-v-2eed9914"]]);var T=q;const x=e=>(Object(r["w"])("data-v-564e44e2"),e=e(),Object(r["u"])(),e),G=x(()=>Object(r["g"])("h2",null,"Sign Up",-1)),L={class:"form-element"},F={class:"form-element"},K={class:"form-element"},z={key:0,class:"error"},D=x(()=>Object(r["g"])("button",null,"Sign Up",-1));function H(e,t,s,o,a,n){return Object(r["t"])(),Object(r["f"])("form",{onSubmit:t[3]||(t[3]=Object(r["K"])((...e)=>n.signup&&n.signup(...e),["prevent"]))},[G,Object(r["g"])("div",L,[Object(r["J"])(Object(r["g"])("input",{type:"text",class:"form-input",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=e=>a.name=e),required:""},null,512),[[r["G"],a.name]])]),Object(r["g"])("div",F,[Object(r["J"])(Object(r["g"])("input",{type:"email",class:"form-input",placeholder:"Email","onUpdate:modelValue":t[1]||(t[1]=e=>a.email=e),required:""},null,512),[[r["G"],a.email]])]),Object(r["g"])("div",K,[Object(r["J"])(Object(r["g"])("input",{type:"password",class:"form-input",placeholder:"Password","onUpdate:modelValue":t[2]||(t[2]=e=>a.password=e),required:""},null,512),[[r["G"],a.password]])]),a.isError?(Object(r["t"])(),Object(r["f"])("p",z,Object(r["C"])(a.errorMessage),1)):Object(r["e"])("",!0),D],32)}var B={data(){return{name:null,email:null,password:null,isError:!1,errorMessage:null}},methods:{async signup(){const e={mode:"signup",name:this.name,email:this.email,password:this.password};this.errorMessage=await this.$store.dispatch("auth",e),this.errorMessage?this.isError=!0:this.isError=!1}}};s("fd8d");const R=f()(B,[["render",H],["__scopeId","data-v-564e44e2"]]);var Y=R;const Q=e=>(Object(r["w"])("data-v-ca2d185e"),e=e(),Object(r["u"])(),e),W=Q(()=>Object(r["g"])("h2",null,"Completed Surveys",-1)),X={key:0};function Z(e,t,s,o,a,n){const i=Object(r["A"])("survey-item");return Object(r["t"])(),Object(r["f"])("ul",null,[W,(Object(r["t"])(!0),Object(r["f"])(r["a"],null,Object(r["z"])(n.surveyArray,e=>(Object(r["t"])(),Object(r["d"])(i,{key:e.id,_id:e._id,name:e.creatorName,profession:e.profession,product:e.product,rating:e.rating,comments:e.comments,creatorId:e.creatorId,mayPublish:e.mayPublish},null,8,["_id","name","profession","product","rating","comments","creatorId","mayPublish"]))),128)),n.areSurveys?Object(r["e"])("",!0):(Object(r["t"])(),Object(r["f"])("p",X,"There are no surveys to see. Create one to populate the list!"))])}const ee=e=>(Object(r["w"])("data-v-f9148de4"),e=e(),Object(r["u"])(),e),te={class:"survey-results"},se={class:"item-container"},re=ee(()=>Object(r["g"])("div",{class:"item-label"},"Name",-1)),oe={class:"item-value"},ae={class:"item-container"},ne=ee(()=>Object(r["g"])("div",{class:"item-label"},"Profession",-1)),ie={class:"item-value"},ce={class:"item-container"},ue=ee(()=>Object(r["g"])("div",{class:"item-label"},"Product",-1)),le={class:"item-value"},de={class:"item-container"},be=ee(()=>Object(r["g"])("div",{class:"item-label"},"Rating",-1)),me={class:"item-value"},pe={class:"item-container"},je=ee(()=>Object(r["g"])("div",{class:"item-label"},"Comments",-1)),Oe={class:"item-value"},ve=ee(()=>Object(r["g"])("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1)),he=[ve],ge=ee(()=>Object(r["g"])("input",{type:"hidden",value:"{{ creatorId }}"},null,-1));function fe(e,t,s,o,a,n){return Object(r["t"])(),Object(r["f"])("li",{class:Object(r["p"])({"user-created":!0===n.isUserCreated,invisible:!1===s.mayPublish})},[Object(r["g"])("div",te,[Object(r["g"])("div",se,[re,Object(r["g"])("div",oe,Object(r["C"])(s.name),1)]),Object(r["g"])("div",ae,[ne,Object(r["g"])("div",ie,Object(r["C"])(s.profession),1)]),Object(r["g"])("div",ce,[ue,Object(r["g"])("div",le,Object(r["C"])(s.product),1)]),Object(r["g"])("div",de,[be,Object(r["g"])("div",me,Object(r["C"])(s.rating),1)]),Object(r["g"])("div",pe,[je,Object(r["g"])("div",Oe,Object(r["C"])(s.comments),1)]),Object(r["g"])("div",{class:Object(r["p"])(["delete-container",{inactive:!1===n.isUserCreated}])},[Object(r["g"])("button",{onClick:t[0]||(t[0]=e=>n.removeListItem(s._id)),class:"delete-btn"},he)],2),ge])],2)}var ye={props:["name","profession","product","rating","comments","_id","creatorId","mayPublish"],computed:{isUserCreated(){const e=this.$store.getters.userId;return this.creatorId===e}},methods:{async removeListItem(e){const t={id:e};await this.$store.dispatch("surveys/deleteSurvey",t)}}};s("73df");const Se=f()(ye,[["render",fe],["__scopeId","data-v-f9148de4"]]);var we=Se,Ie={components:{SurveyItem:we},computed:{surveyArray(){return this.$store.getters["surveys/surveys"]},areSurveys(){return!!(this.surveyArray&&this.surveyArray.length>0)}},methods:{async loadSurveys(){await this.$store.dispatch("surveys/getSurveys"),console.log(this.surveyArray)}},created(){this.loadSurveys()}};s("b8ca");const Pe=f()(Ie,[["render",Z],["__scopeId","data-v-ca2d185e"]]);var ke=Pe;const _e=e=>(Object(r["w"])("data-v-70d019d9"),e=e(),Object(r["u"])(),e),Ae={class:"form-element"},Ne=_e(()=>Object(r["g"])("h3",null,"Please tell us a bit about yourself",-1)),Ue=Object(r["h"])('<option value="" disabled selected data-v-70d019d9>Select Profession</option><option value="Developer" data-v-70d019d9>Developer</option><option value="Program Manager" data-v-70d019d9>Program Manager</option><option value="Cyber Security" data-v-70d019d9>Cyber Security</option><option value="Manager" data-v-70d019d9>Manager</option><option value="Executive" data-v-70d019d9>Executive</option>',6),Ce=[Ue],Me={class:"form-element"},Ee=_e(()=>Object(r["g"])("h3",null,"Please select your product",-1)),Je=Object(r["h"])('<option value="" disabled selected data-v-70d019d9>Select Product</option><option value="Ergonomic Keyboard" data-v-70d019d9>Keyboard</option><option value="Mouse" data-v-70d019d9>Mouse</option><option value="Monitor" data-v-70d019d9>Monitor</option><option value="Desk" data-v-70d019d9>Desk</option><option value="Paper" data-v-70d019d9>Paper</option>',6),$e=[Je],Ve={class:"form-element"},qe=_e(()=>Object(r["g"])("h3",null,"How satisfied are you with this product?",-1)),Te=_e(()=>Object(r["g"])("label",{for:"not-satisfied"},"Not satisfied",-1)),xe=_e(()=>Object(r["g"])("label",{for:"satisfied"},"Satisfied",-1)),Ge=_e(()=>Object(r["g"])("label",{for:"very-satisfied"},"Very satisfied",-1)),Le={class:"form-element"},Fe=_e(()=>Object(r["g"])("h3",null,"Please share any comments you have",-1)),Ke=_e(()=>Object(r["g"])("h3",null,"May we publish your opinion?",-1)),ze=_e(()=>Object(r["g"])("label",{for:"yes"},"Yes",-1)),De=_e(()=>Object(r["g"])("label",{for:"no"},"No",-1)),He=_e(()=>Object(r["g"])("button",null,"Submit",-1));function Be(e,t,s,o,a,n){return Object(r["t"])(),Object(r["f"])("form",{class:"survey-form",onSubmit:t[8]||(t[8]=Object(r["K"])((...e)=>n.submitForm&&n.submitForm(...e),["prevent"]))},[Object(r["g"])("div",Ae,[Ne,Object(r["J"])(Object(r["g"])("select",{class:"form-input","onUpdate:modelValue":t[0]||(t[0]=e=>a.profession=e),required:""},Ce,512),[[r["F"],a.profession]])]),Object(r["g"])("div",Me,[Ee,Object(r["J"])(Object(r["g"])("select",{class:"form-input","onUpdate:modelValue":t[1]||(t[1]=e=>a.product=e),required:""},$e,512),[[r["F"],a.product]])]),Object(r["g"])("div",Ve,[qe,Object(r["g"])("div",null,[Object(r["J"])(Object(r["g"])("input",{id:"not-satisfied",name:"satisfaction",type:"radio",value:"Not satisfied","onUpdate:modelValue":t[2]||(t[2]=e=>a.rating=e),required:""},null,512),[[r["E"],a.rating]]),Te]),Object(r["g"])("div",null,[Object(r["J"])(Object(r["g"])("input",{id:"satisfied",name:"satisfaction",type:"radio",value:"Satisfied","onUpdate:modelValue":t[3]||(t[3]=e=>a.rating=e)},null,512),[[r["E"],a.rating]]),xe]),Object(r["g"])("div",null,[Object(r["J"])(Object(r["g"])("input",{id:"very-satisfied",name:"satisfaction",type:"radio",value:"Very satisfied","onUpdate:modelValue":t[4]||(t[4]=e=>a.rating=e)},null,512),[[r["E"],a.rating]]),Ge])]),Object(r["g"])("div",Le,[Fe,Object(r["J"])(Object(r["g"])("textarea",{id:"comments",name:"comments",rows:"5","onUpdate:modelValue":t[5]||(t[5]=e=>a.comments=e)},null,512),[[r["G"],a.comments]])]),Ke,Object(r["g"])("div",null,[Object(r["J"])(Object(r["g"])("input",{id:"yes",name:"publish-permission",type:"radio",value:"true","onUpdate:modelValue":t[6]||(t[6]=e=>a.mayPublish=e)},null,512),[[r["E"],a.mayPublish]]),ze]),Object(r["g"])("div",null,[Object(r["J"])(Object(r["g"])("input",{id:"no",name:"publish-permission",type:"radio",value:"false","onUpdate:modelValue":t[7]||(t[7]=e=>a.mayPublish=e)},null,512),[[r["E"],a.mayPublish]]),De]),He],32)}var Re={data(){return{profession:"",product:"",rating:null,comments:"",mayPublish:!0}},computed:{creatorName(){return this.$store.getters.userName},creatorId(){return this.$store.getters.userId}},methods:{resetForm(){this.profession="",this.rating=null,this.comments="",this.mayPublish=!0},submitForm(){try{const e={creatorName:this.creatorName,creatorId:this.creatorId,profession:this.profession,product:this.product,rating:this.rating,comments:this.comments,mayPublish:this.mayPublish};console.log(e),this.$store.dispatch("surveys/createSurvey",e),this.resetForm(),this.$router.push("/surveys")}catch(e){console.log(e)}}}};s("e27b");const Ye=f()(Re,[["render",Be],["__scopeId","data-v-70d019d9"]]);var Qe=Ye,We=s("5502"),Xe={async auth(e,t){let s="http://localhost:3000/users/"+t.mode;const r=await fetch(s,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:t.email,password:t.password,name:t.name})});if(r.ok){const t=await r.json();return e.commit("setUser",{userId:t.user._id,token:t.token,userName:t.user.name}),localStorage.setItem("userId",t.user._id),localStorage.setItem("token",t.token),localStorage.setItem("userName",t.user.name),null}{const e="Authentication failed. Check your username and password.";return e}},autoLogin(e){const t=localStorage.getItem("token"),s=localStorage.getItem("userId"),r=localStorage.getItem("userName");e.commit("setUser",{token:t,userId:s,userName:r})},logout(e){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("userName"),e.commit("setUser",{token:null,userId:null,userName:null})}},Ze={isAuthenticated(e){return!!(e.userName||e.userId||e.token)},userName(e){return e.userName},userId(e){return e.userId},token(e){return e.token}},et={setUser(e,t){e.userName=t.userName,e.token=t.token,e.userId=t.userId}},tt={state(){return{userName:null,userId:null,token:null}},actions:Xe,getters:Ze,mutations:et},st={async getSurveys(e){const t={userId:e.rootGetters.userId},s=await fetch("http://localhost:3000/surveys/all",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.rootGetters.token},body:JSON.stringify(t)}),r=await s.json();e.commit("setSurveys",r)},async deleteSurvey(e,t){e.commit("removeSurvey",t);const s={userId:e.rootGetters.userId,surveyId:t.id},r=await fetch("http://localhost:3000/surveys/delete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:e.rootGetters.token},body:JSON.stringify(s)}),o=await r.json();console.log(o)},async createSurvey(e,t){await fetch("http://localhost:3000/surveys/new",{method:"POST",headers:{"Content-Type":"application/json",Authorization:e.rootGetters.token},body:JSON.stringify(t)})},clearSurveys(e){e.commit("setSurveys",[])}},rt={surveys(e){return e.surveys}},ot={setSurveys(e,t){e.surveys=t},removeSurvey(e,t){e.surveys=e.surveys.filter(e=>e._id!==t.id)}},at={namespaced:!0,state(){return{surveys:[]}},actions:st,getters:rt,mutations:ot};const nt=Object(We["a"])({modules:{auth:tt,surveys:at}});var it=nt;const ct=Object(N["a"])({history:Object(N["b"])(),routes:[{path:"/login",name:"Login",component:T,meta:{requiresUnauth:!0}},{path:"/signup",name:"Sign Up",component:Y,meta:{requiresUnauth:!0}},{path:"/surveys",name:"Surveys",component:ke,meta:{requiresAuth:!0}},{path:"/",redirect:"/surveys"},{path:"/new",component:Qe,meta:{requiresAuth:!0}}]});ct.beforeEach((e,t,s)=>{e.meta.requiresAuth&&!it.getters.isAuthenticated?s("/login"):e.meta.requiresUnauth&&it.getters.isAuthenticated?s("/surveys"):s()});var ut=ct;Object(r["c"])(A).use(it).use(ut).mount("#app")},"67a2":function(e,t,s){"use strict";s("7297")},"6a43":function(e,t,s){"use strict";s("a8aa")},"6a70":function(e,t,s){"use strict";s("d6da")},"6d82":function(e,t,s){},7102:function(e,t,s){},7297:function(e,t,s){},7372:function(e,t,s){},"73df":function(e,t,s){"use strict";s("7102")},a8aa:function(e,t,s){},b8ca:function(e,t,s){"use strict";s("f45a")},d6da:function(e,t,s){},daad:function(e,t,s){"use strict";s("6d82")},e27b:function(e,t,s){"use strict";s("54d6")},f45a:function(e,t,s){},fd8d:function(e,t,s){"use strict";s("7372")}});
//# sourceMappingURL=app.198082a3.js.map